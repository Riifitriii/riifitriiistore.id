<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Riifitriii Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <style>
    .toastify-custom {
      font-family: "Arial", sans-serif;
      font-weight: 500;
      border-radius: 4px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .swiper-slide img {
      width: 100%;
      height: auto;
      aspect-ratio: 2 / 1;
      object-fit: cover;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .about-us p {
      transition: transform 0.3s ease-in-out;
    }

    .about-us p:hover {
      transform: translateY(-5px);
    }

    .about-us img {
      transition: transform 0.3s ease-in-out;
    }

    .about-us img:hover {
      transform: scale(1.05);
    }
  </style>
</head>

<body class="bg-gray-100 text-gray-800 font-sans">
  <!-- Header -->
  <header class="bg-white shadow sticky top-0 z-10">
    <div class="max-w-6xl mx-auto p-4 flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <img src="logo.png" alt="Logo Riifitriii Store" class="h-10 w-30 object-contain" />
        <h1 class="text-2xl font-bold text-purple-700">Riifitriii Store</h1>
      </div>
      <div class="flex items-center space-x-4">
        <a href="cart.html" class="relative">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-700" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
          </svg>
          <span id="cartCount"
            class="absolute -top-2 -right-2 bg-purple-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
        </a>
        <a href="login.html" class="text-purple-700 hover:underline">Login</a>
        <a href="register.html" class="text-purple-700 hover:underline">Register</a>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="bg-purple-100 py-10 text-center">
    <h2 class="text-3xl font-bold mb-2">Tampil Stylish Setiap Hari!</h2>
    <p class="text-lg">
      Fashion kekinian untuk setiap suasana. Temukan gaya favoritmu di
      Riifitriii Store!
    </p>
  </section>

  <!-- Banner Promosi Bergulir -->
  <div class="max-w-6xl mx-auto mt-6 px-4">
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <!-- Slide 1 -->
        <div class="swiper-slide">
          <img src="promo1.jpg" alt="Promo 1" />
        </div>
        <!-- Slide 2 -->
        <div class="swiper-slide">
          <img src="promo2.jpg" alt="Promo 2" />
        </div>
        <!-- Slide 3 -->
        <div class="swiper-slide">
          <img src="promo3.jpg" alt="Promo 3" />
        </div>
        <!-- Slide 4 -->
        <div class="swiper-slide">
          <img src="promo4.jpg" alt="Promo 4" />
        </div>
      </div>
      <!-- Navigasi Slider -->
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
    </div>
  </div>

  <!-- Tentang Kami -->
  <section class="max-w-6xl mx-auto py-10 px-4">
    <h3 class="text-2xl font-bold mb-4 text-purple-700">Tentang Kami</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Gambar -->
      <div class="w-full">
        <img src="about-us.jpg" alt="Tentang Kami" class="w-full h-64 object-cover rounded-xl shadow-md" />
      </div>
      <!-- Teks -->
      <div class="w-full space-y-4">
        <div class="bg-purple-300 p-4 rounded-lg shadow-md">
          <p class="text-lg text-gray-700">
            Selamat datang di RiiFitriii Store, destinasi fashion pilihan untuk pria dan wanita yang menghargai gaya,
            kualitas, dan ekspresi diri.
          </p>
        </div>
        <div class="bg-purple-300 p-4 rounded-lg shadow-md">
          <p class="text-lg text-gray-700">
            Berdiri dengan semangat untuk menyediakan fashion yang memperkuat kepercayaan diri, RiiFitriii Store hadir
            sebagai pilihan utama bagi mereka yang ingin tampil menarik dalam setiap kesempatan. Koleksi kami diseleksi
            dengan teliti untuk memenuhi kebutuhan fashion modern yang terus berkembang.
          </p>
        </div>
        <div class="bg-purple-300 p-4 rounded-lg shadow-md">
          <p class="text-lg text-gray-700">
            Kami percaya bahwa fashion adalah cara seseorang mengekspresikan kepribadian. Itulah mengapa setiap item
            yang kami tawarkan dirancang untuk memberikan kesan mendalam dan mencerminkan keunikan pemakainya. Dari
            pakaian kasual hingga formal, RiiFitriii Store menyediakan pilihan yang dapat menyempurnakan penampilan
            Anda.
          </p>
        </div>
        <div class="bg-purple-300 p-4 rounded-lg shadow-md">
          <p class="text-lg text-gray-700">
            Kami berkomitmen untuk memberikan pelayanan terbaik kepada pelanggan kami. Tim kami siap membantu Anda
            dalam memilih produk yang tepat dan memberikan saran fashion yang sesuai dengan gaya Anda.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Katalog Produk -->
  <section class="max-w-6xl mx-auto py-10 px-4">
    <h3 class="text-2xl font-bold mb-6 text-purple-700">Produk Unggulan</h3>
    <div id="productGrid" class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      <!-- Produk akan muncul dari JS -->
    </div>
    <div class="text-center mt-6">
      <a href="dashboard-pengunjung.html"
        class="inline-block bg-purple-700 text-white px-6 py-2 rounded-lg hover:bg-purple-800 transition">
        Lihat Semua Produk
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-white py-4 text-center text-sm text-gray-500 mt-10">
    &copy; 2025 Riifitriii Store. All rights reserved.
  </footer>

  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <!-- Script Produk -->
  <script src="products.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const productGrid = document.getElementById("productGrid");
      if (typeof products === "undefined") {
        console.error("Products data not loaded!");
        productGrid.innerHTML =
          '<p class="text-center py-8 text-red-500">Produk tidak dapat dimuat. Silakan refresh halaman.</p>';
        return;
      }

      function renderProducts(data) {
        productGrid.innerHTML = "";
        const cart = JSON.parse(localStorage.getItem("cart")) || [];

        data.forEach((product) => {
          const isInCart = cart.find((item) => item.id === product.id);
          const isOutOfStock = product.stock === 0;

          const buttonText = isInCart
            ? "Sudah di Keranjang"
            : isOutOfStock
              ? "Stok Habis"
              : "Tambah ke Keranjang";

          const isButtonDisabled = isInCart || isOutOfStock;
          const buttonClass = isButtonDisabled
            ? "bg-gray-400 cursor-not-allowed"
            : "bg-purple-600 hover:bg-purple-700 cursor-pointer";

          const div = document.createElement("div");
          div.className = "bg-white rounded-xl shadow p-4";
          div.innerHTML = `
          <img src="${product.image}" alt="${product.name
            }" class="w-full aspect-[3/4] object-cover rounded-lg mb-4" />
              <h3 class="font-bold text-lg text-purple-700">${product.name}</h3>
              <p class="text-sm text-gray-500 capitalize">${product.category} | ${product.material
            }</p>
              <p class="text-gray-700 font-semibold mt-1">Rp${product.price.toLocaleString()}</p>
              <p class="text-xs text-gray-400 mt-1">Stok: ${product.stock}</p>
              <div class="mt-4">
                <button
                  data-product='${JSON.stringify(product).replace(/'/g, "\\'")}'
                  class="add-to-cart-btn ${buttonClass} text-white px-4 py-2 rounded-lg text-sm w-full transition duration-200 ease-in-out transform hover:scale-105 focus:outline-none"
                  ${isButtonDisabled ? "disabled" : ""}
                >${buttonText}</button>
              </div>
            `;
          productGrid.appendChild(div);
        });
      }

      // Render produk lokal segera (tampilkan 6 produk pertama)
      renderProducts(products.slice(0, 6));

      // Add event listeners for all add-to-cart buttons
      document.addEventListener("click", function (e) {
        if (e.target.classList.contains("add-to-cart-btn")) {
          const product = JSON.parse(e.target.dataset.product);
          addToCart(product);
        }
      });

      function updateCartCount() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        document.getElementById("cartCount").textContent = cart.length;
      }
      updateCartCount();

      function addToCart(product) {
        try {
          let cart = JSON.parse(localStorage.getItem("cart")) || [];

          // Cek apakah produk sudah ada
          const existingItem = cart.find((item) => item.id === product.id);
          if (existingItem) {
            Toastify({
              text: "Produk sudah ada di keranjang",
              duration: 3000,
              gravity: "top",
              position: "right",
              backgroundColor: "#d8b4fe",
            }).showToast();
            return;
          }

          if (product.stock === 0) {
            Toastify({
              text: "Stok habis!",
              duration: 3000,
              gravity: "top",
              position: "right",
              backgroundColor: "#fce7f3",
            }).showToast();
            return;
          }

          // Masukkan ke keranjang
          cart.push({ ...product, qty: 1 });
          localStorage.setItem("cart", JSON.stringify(cart));

          Toastify({
            text: "Produk ditambahkan ke keranjang",
            duration: 3000,
            gravity: "top",
            position: "right",
            backgroundColor: "#a855f7",
          }).showToast();

          updateCartCount();
          renderProducts(products.slice(0, 6)); // render ulang untuk update tombol, tetap tampilkan 6 produk
        } catch (e) {
          console.error("Gagal menyimpan ke cart:", e);
          Toastify({
            text: "Gagal menambahkan produk ke keranjang",
            duration: 3000,
            gravity: "top",
            position: "right",
            backgroundColor: "#ec4899",
          }).showToast();
        }
      }
    });
  </script>
</body>

</html>